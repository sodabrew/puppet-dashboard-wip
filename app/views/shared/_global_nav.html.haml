.topbar
  .topbar-inner
    .container
      %ul#global-navigation.navigation
        %li#logo
          - css = ["background-repeat: no-repeat", "text-indent: -9000px"]
          - css << "background-image: url('#{SETTINGS.custom_logo_url}')"
          - css << "height: #{SETTINGS.custom_logo_height}"
          - css << "width: #{SETTINGS.custom_logo_width}"
          %a{:href => root_path, :title => SETTINGS.custom_logo_alt_text, :style => css.join('; ')} Puppet Dashboard
        - if !SETTINGS.auth_enabled or user_signed_in?
          %li#navigation-home{:class => active_if(request.url == root_url)}
            = link_to "Home", root_path
          %li#navigation-nodes{:class => active_if(controller_name == "nodes" && action_name == "index")}
            = link_to "Nodes", nodes_path
          %li#navigation-groups{:class => active_if(controller_name == "node_groups")}
            = link_to "Groups", node_groups_path
          - if SETTINGS.use_external_node_classification
            %li#navigation-classes{:class => active_if(controller_name == "node_classes")}
              = link_to "Classes", node_classes_path
          %li#navigation-reports{:class => active_if(controller_name == "reports" && action_name == "index")}
            = link_to "Reports", reports_path
          %li#navigation-file-search{:class => active_if(controller_name == "reports" && action_name == "search")}
            = link_to "File Search", search_reports_path
          - if SETTINGS.enable_inventory_service
            %li#navigation-inventory-search{:class => active_if(controller_name == "nodes" && action_name == "search")}
              = link_to "Inventory Search", search_nodes_path
          - Registry.each_callback :core, :global_nav_widgets do |callback|
            = callback.call self
          - Registry.each_callback :core, :account_widgets do |callback|
            = callback.call self
          %li#navigation-autorefresh
            <label><input type="checkbox" id="autorefresh" style="vertical-align: baseline;" /> Refresh this page automatically? <span id="autorefresh_countdown" style="display: inline-block; width: 1em; text-align: right;">&nbsp;</span></label>
        - if SETTINGS.auth_enabled and user_signed_in?
          %li
            Logged in as #{current_user.email} &dash;
            = link_to("Logout", destroy_user_session_path, :method => :delete)
